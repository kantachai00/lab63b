# การทดลองที่1 การเขียนโปรแกรมเพื่อรันบนไมโครคอนโทรเลอร์

## วัตถุประสงค์
1. เพื่อศึกษาการใช้คำสั่งเกี่ยวกับไมโครคอนโทรเลอร์
2. เพื่อศึกษาวิธีการเขียนโปรแกรมลงบนไมโครคอนโทรเลอร์

## อุปกรณ์ที่ใช้

1. ไมโครคอนโทรเลอร์(ESP-01)
2. สาย USB
3. ซีเรียลบอร์ด
4. คอมพิวเตอร์

## ศึกษาข้อมูลเบื้องต้น
https://www.youtube.com/watch?v=NLIUsWLEpmg

## วิธีการทดลอง
1. เสียบไมโครคอนโทรลเลอร์กับซีเรียลพอร์ท
2. เปิด command prompt ไปที่ไดรฟ์ D โดยใช้คำสั่ง **D:**
3. เข้าโปรแกรมตัวอย่างโดยใช้คำสั่ง **cd pattani**
4. เลือกโปรแกรมคำสั่ง **cd 01_Serial-Moniter**
5. พิมพ์คำสั่ง vi src/main.cpp เพื่อรันโปรแกรม จะได้  
```
#include <Arduino.h>

int cnt = 0;

void setup()
{
	Serial.begin(115200);
}

void loop()
{
	cnt++;
	Serial.printf("PATTANI :%d\n",cnt);
	delay(1000);
}
```
6. พิมพ์คำสั่ง vi platformip.ini จะได้ 
```
; IOT for KIDS
;
; By Dr.Choompol Boonmee
; 
[env:exercise01]
platform = nordicnrf51
board = NRF51822
framework = Mbed	
board_build.flash_mode = dout
upload_port = /dev/cu.usbserial-1420
;upload_port = COM3
monitor_port = /dev/cu.usbserial-1420
;monitor_port = COM3
monitor_speed = 115200
```
7. ใช้คำสั่ง **pio run -t upload** เพื่ออัพโหลดโปรแกรมลงในไมโครคอนโทรนเลอร์ พร้อมทั้งกดปุ่มสีดำบนไมโครคอนโทรเลอร์ค้างไว้เพื่อให้ดาวโหลด และกดปุ่มรีเซ็๖สีแดงอีกครั้งเพื่อรีเซ็ทคำสั่งเก่า
8. ใช้คำสั่ง**pio device monitor** เพื่อดูผลลัพธ์

## การบันทึกผลการทดลอง
1. ตัวแปร count จะเพิ่มขึ้นทีละ 1 ในทุก 1 วินาที
2. หากทำการกดปุ่มรีเซตจะเริ่มทำการนับหนึ่งใหม่

## อธิบายผลการทดลอง
เมื่อทำการรันโปรแกรมลงบนไมโครคอนโทรลเลอร์โดยการอัพโหลดโปรแกรม 01_Serial-Monitor และทำการรันโปรแกรมโดยใช้คำสั่ง pio device monitor จะทำให้เกิดการเปลี่ยนตัวแปรในทุก 1 วินาที และสามารถทำการเริ่มนับใหม่ได้เมื่อทำการกดปุ่มรีเซตสีแดงบนตัวไมโครคอนโทรลเลอร์

## คำถามหลังการทดลอง
ถาม เราสามารถเปลี่ยนแปลงผลลัพธ์ในการแสดงผลให้เกิดการเปลี่ยนแปลงตัวแปรมากกว่า 1 วินาทีได้หรือไม่

ตอบ สามารถทำได้โดยการเปลี่ยนคำสั่ง delay(1000) ให้เป็นค่าตามที่ต้องการ
